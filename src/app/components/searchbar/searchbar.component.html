<form
  [formGroup]="searchService.searchForm"
  (submit)="submit()"
  [style.background-color]="
    onSearchPage ? 'transparent' : 'rgba(var(--bkg-color), 1)'
  "
>
  <div class="searchbarContainer">
    <svg
      stroke="currentColor"
      fill="currentColor"
      stroke-width="0"
      viewBox="0 0 24 24"
      height="1em"
      width="1em"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"
      ></path>
    </svg>
    <input
      #input
      formControlName="searchTerm"
      type="search"
      placeholder="Search Twitter"
      [value]="searchService.searchForm.value.searchTerm"
    />
  </div>
  <ng-container *ngIf="searchService.searchPreview$ | async as result">
    <div class="searchResultsDropdown">
      <ng-container *ngIf="result.users.length > 0">
        <h3>People</h3>
        <a
          class="searchResult"
          *ngFor="let user of result.users"
          [routerLink]="'../' + user.username"
        >
          <img
            class="userProfilePicPreview"
            [src]="
              domain +
              '/users/' +
              user.username +
              '/profile_pic/' +
              user.profile_pic
            "
          />
          <div class="names">
            <span class="name">{{ user.name }}</span>
            <span class="username">@{{ user.username }}</span>
          </div>
        </a>
      </ng-container>
      <ng-container *ngIf="result.posts.length > 0">
        <h3>Tweets</h3>
        <a
          class="searchResult post"
          *ngFor="let post of result.posts"
          [routerLink]="'../' + post.username + '/' + post.id"
        >
          <div class="names">
            <span>@{{ post.username }}</span>
          </div>
          <div class="textAndPhoto">
            <span class="postTextPreview">{{ post.text }}</span>
            <img
              class="postPhotoPreview"
              *ngIf="post.photo_url"
              [src]="
                domain + '/posts/' + post.id + '/photo_url/' + post.photo_url
              "
            />
          </div>
        </a>
      </ng-container>
      <ng-container *ngIf="result.tags.length > 0">
        <h3>Hashtags</h3>
        <a
          style="padding: 1rem"
          class="searchResult"
          *ngFor="let tag of result.tags"
        >
          <span>#{{ tag.text }}</span>
        </a>
      </ng-container>
    </div>
  </ng-container>
  <button style="display: none" type="submit"></button>
</form>
